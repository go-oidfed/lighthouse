
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Gabriel Zachmann">
      
      
      
        <link rel="prev" href="../signing/">
      
      
        <link rel="next" href="../federation_data/">
      
      
        
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Endpoints - LightHouse</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/admonitions.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fetch" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LightHouse" class="md-header__button md-logo" aria-label="LightHouse" data-md-component="logo">
      
  <img src="../../assets/logo_dm.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LightHouse
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Endpoints
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  LightHouse - A Configurable OIDFed Trust Anchor

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../features/" class="md-tabs__link">
          
  
  
    
  
  Features

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Config

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../deployment/caddy/" class="md-tabs__link">
        
  
  
    
  
  Deployment

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LightHouse" class="md-nav__button md-logo" aria-label="LightHouse" data-md-component="logo">
      
  <img src="../../assets/logo_dm.svg" alt="logo">

    </a>
    LightHouse
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LightHouse - A Configurable OIDFed Trust Anchor
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../features/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/endpoints/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 10H5L3 8l2-2h6V3l1-1 1 1v1h6l2 2-2 2h-6v2h6l2 2-2 2h-6v6a2 2 0 0 1 2 2H9a2 2 0 0 1 2-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Endpoints
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/entity_checks/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m22 4-2-2c-1.15.64-2.6 1-4 1s-2.86-.37-4-1c-1.14.63-2.6 1-4 1s-2.85-.36-4-1L2 4s2 2 2 4-2 6-2 8c0 4 10 6 10 6s10-2 10-6c0-2-2-6-2-8s2-4 2-4m-6.95 12.45-3.08-1.86-3.07 1.86.82-3.5L7 10.61l3.58-.31L11.97 7l1.4 3.29 3.58.31-2.72 2.34z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Entity Checks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/trustmarks/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m10 16-5-5 1.41-1.42L10 13.17l7.59-7.59L19 7m0-6H5c-1.11 0-2 .89-2 2v12.93c0 .69.35 1.3.88 1.66L12 23l8.11-5.41c.53-.36.89-.97.89-1.66V3a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    
  
    Trustmarks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Config
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Config
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../server/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 19h1a1 1 0 0 1 1 1h7v2h-7a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H2v-2h7a1 1 0 0 1 1-1h1v-2H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-7zM4 3h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1m5 4h1V5H9zm0 8h1v-2H9zM5 5v2h2V5zm0 8v2h2v-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.8 20c-.4 1.2-1.5 2-2.8 2H5c-1.7 0-3-1.3-3-3v-1h12.2c.4 1.2 1.5 2 2.8 2zM19 2c1.7 0 3 1.3 3 3v1h-2V5c0-.6-.4-1-1-1s-1 .4-1 1v13h-1c-.6 0-1-.4-1-1v-1H5V5c0-1.7 1.3-3 3-3zM8 6v2h7V6zm0 4v2h6v-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Logging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg>
  
  <span class="md-ellipsis">
    
  
    Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m16.5 16.25 2.86 1.69-.75 1.22L15 17v-5h1.5zM23 16c0 3.87-3.13 7-7 7a7 7 0 0 1-5.75-3C6.18 19.79 3 18.08 3 16v-3c0 1.88 2.58 3.44 6.06 3.88C9.03 16.59 9 16.3 9 16c0-.38.04-.75.1-1.12-3.5-.43-6.1-2-6.1-3.88V8c0 2.09 3.2 3.8 7.27 4 .6-.86 1.37-1.56 2.26-2.07-.49.04-1.03.07-1.53.07-4.42 0-8-1.79-8-4s3.58-4 8-4 8 1.79 8 4c0 1.2-1.07 2.28-2.75 3 .75.04 1.5.19 2.19.45C18.79 9 19 8.5 19 8v1.68c2.36 1.13 4 3.53 4 6.32m-2 0c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5 5-2.24 5-5"/></svg>
  
  <span class="md-ellipsis">
    
  
    Cache
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../signing/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 22H2v-2h20zM6.2 17.3l-.7.7-1.4-1.4L2.7 18l-.7-.7 1.4-1.4L2 14.5l.7-.7 1.4 1.4 1.4-1.4.7.7-1.4 1.4zm10.02-2.87c0-.58-.72-1.23-2.16-1.97-1.83-.92-3.06-1.67-3.7-2.22-.65-.56-.97-1.18-.97-1.87 0-1.78.91-3.25 2.73-4.42s3.31-1.76 4.45-1.76c.74 0 1.28.13 1.61.39.32.25.5.69.5 1.32 0 .28-.12.52-.37.73-.24.2-.44.3-.57.3-.11 0-.31-.1-.61-.29l-.58-.26c-.47 0-1.41.33-2.84 1q-2.13.99-2.13 2.25c0 .51.24.97.74 1.37.5.42 1.39.93 2.68 1.53 1.03.47 1.86.97 2.5 1.54.6.54.91 1.18.91 1.93 0 1.34-.94 2.41-2.83 3.17-1.88.77-3.68 1.15-5.39 1.15-1.44 0-2.19-.49-2.19-1.46 0-.36.19-.59.5-.75.33-.16.66-.24 1-.24l.75.13.72.13c.98 0 2.03-.16 3.16-.49 1.13-.32 1.83-.73 2.09-1.21"/></svg>
  
  <span class="md-ellipsis">
    
  
    Signing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 10H5L3 8l2-2h6V3l1-1 1 1v1h6l2 2-2 2h-6v2h6l2 2-2 2h-6v6a2 2 0 0 1 2 2H9a2 2 0 0 1 2-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Endpoints
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 10H5L3 8l2-2h6V3l1-1 1 1v1h6l2 2-2 2h-6v2h6l2 2-2 2h-6v6a2 2 0 0 1 2 2H9a2 2 0 0 1 2-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Endpoints
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fetch" class="md-nav__link">
    <span class="md-ellipsis">
      
        fetch
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="fetch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statement_lifetime" class="md-nav__link">
    <span class="md-ellipsis">
      
        statement_lifetime
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#list" class="md-nav__link">
    <span class="md-ellipsis">
      
        list
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="list">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolve" class="md-nav__link">
    <span class="md-ellipsis">
      
        resolve
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="resolve">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grace_period" class="md-nav__link">
    <span class="md-ellipsis">
      
        grace_period
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time_elapsed_grace_factor" class="md-nav__link">
    <span class="md-ellipsis">
      
        time_elapsed_grace_factor
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allowed_trust_anchors" class="md-nav__link">
    <span class="md-ellipsis">
      
        allowed_trust_anchors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use_entity_collection_allowed_trust_anchors" class="md-nav__link">
    <span class="md-ellipsis">
      
        use_entity_collection_allowed_trust_anchors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proactive_resolver" class="md-nav__link">
    <span class="md-ellipsis">
      
        proactive_resolver
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="proactive_resolver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        enabled
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrency_limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        concurrency_limit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queue_size" class="md-nav__link">
    <span class="md-ellipsis">
      
        queue_size
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response_storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        response_storage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="response_storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dir" class="md-nav__link">
    <span class="md-ellipsis">
      
        dir
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store_json" class="md-nav__link">
    <span class="md-ellipsis">
      
        store_json
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store_jwt" class="md-nav__link">
    <span class="md-ellipsis">
      
        store_jwt
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trust_mark" class="md-nav__link">
    <span class="md-ellipsis">
      
        trust_mark
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trust_mark">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trust_mark_specs" class="md-nav__link">
    <span class="md-ellipsis">
      
        trust_mark_specs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trust_mark_specs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trust_mark_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        trust_mark_type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lifetime" class="md-nav__link">
    <span class="md-ellipsis">
      
        lifetime
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ref" class="md-nav__link">
    <span class="md-ellipsis">
      
        ref
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logo_uri" class="md-nav__link">
    <span class="md-ellipsis">
      
        logo_uri
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delegation_jwt" class="md-nav__link">
    <span class="md-ellipsis">
      
        delegation_jwt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extra-claims" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extra Claims
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checker" class="md-nav__link">
    <span class="md-ellipsis">
      
        checker
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trust_mark_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        trust_mark_request
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trust_mark_request">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trust_mark_status" class="md-nav__link">
    <span class="md-ellipsis">
      
        trust_mark_status
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trust_mark_status">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trust_mark_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        trust_mark_list
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trust_mark_list">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#historical_keys" class="md-nav__link">
    <span class="md-ellipsis">
      
        historical_keys
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="historical_keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enroll" class="md-nav__link">
    <span class="md-ellipsis">
      
        enroll
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="enroll">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="url">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checker_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        checker
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enroll_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        enroll_request
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="enroll_request">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entity_collection" class="md-nav__link">
    <span class="md-ellipsis">
      
        entity_collection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="entity_collection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#url_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        url
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allowed_trust_anchors_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        allowed_trust_anchors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        interval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrency_limit_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        concurrency_limit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pagination_limit" class="md-nav__link">
    <span class="md-ellipsis">
      
        pagination_limit
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../federation_data/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14 2-3 1.5v16.44C7 19.5 4 17.46 4 15c0-2.25 2.5-4.15 6-4.78V8.19c-5.14.69-9 3.47-9 6.81 0 3.56 4.36 6.5 10 6.94h.09L14 20.5zm1 6.19v2.03c1.15.21 2.18.55 3.06 1L16.5 12l6.5 1.5-.5-4.5-2 1C19 9.12 17.12 8.47 15 8.19"/></svg>
  
  <span class="md-ellipsis">
    
  
    Federation Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/caddy/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.983 11.078h2.119a.186.186 0 0 0 .186-.185V9.006a.186.186 0 0 0-.186-.186h-2.119a.185.185 0 0 0-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 0 0 .186-.186V3.574a.186.186 0 0 0-.186-.185h-2.118a.185.185 0 0 0-.185.185v1.888c0 .102.082.185.185.185m0 2.716h2.118a.187.187 0 0 0 .186-.186V6.29a.186.186 0 0 0-.186-.185h-2.118a.185.185 0 0 0-.185.185v1.887c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 0 0 .184-.186V6.29a.185.185 0 0 0-.185-.185H8.1a.185.185 0 0 0-.185.185v1.887c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 0 0 .185-.186V6.29a.185.185 0 0 0-.185-.185H5.136a.186.186 0 0 0-.186.185v1.887c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 0 0 .186-.185V9.006a.186.186 0 0 0-.186-.186h-2.118a.185.185 0 0 0-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 0 0 .184-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.185.185 0 0 0-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 0 0 .185-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.186.186 0 0 0-.186.186v1.887c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 0 0 .184-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.185.185 0 0 0-.184.185v1.888c0 .102.082.185.185.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51q-.508.001-1.01.087c-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.75.75 0 0 0-.75.748 11.4 11.4 0 0 0 .692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137a15.7 15.7 0 0 0 2.93-.266 12.3 12.3 0 0 0 3.823-1.389 10.5 10.5 0 0 0 2.61-2.136c1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288Z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Endpoints</h1>

<p><span class="badge badge-red" title="If this option is required or optional">required, if LightHouse should do anything useful</span></p>
<p>The <code>endpoints</code> config option is used to enable and configure the various endpoints that LightHouse supports. By 
enabling endpoints LightHouse functionality is extended, i.e. LightHouse can serve different roles depending on the 
enabled endpoints.</p>
<h2 id="fetch"><code>fetch</code><a class="headerlink" href="#fetch" title="Permanent link">&para;</a></h2>
<p>Under the <code>fetch</code> option the Federation Subordinate Fetching Endpoint is configured.</p>
<p>This endpoint is required if LightHouse serves as a Trust Anchor and / or Intermediate Authority.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">fetch</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/fetch</span>
<span class="w">        </span><span class="nt">statement_lifetime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3600</span>
</code></pre></div>
</details>
<h3 id="path"><code>path</code><a class="headerlink" href="#path" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Fetch Endpoint is available. Unless <code>url</code> is not set 
the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Fetch Endpoint. To include an external Fetch Endpoint in the 
Federation Metadata in the Entity Configuration set <code>url</code>. However, for the Fetch Endpoint it is unlikely that this 
deployment scenario makes sense.</p>
<h3 id="url"><code>url</code><a class="headerlink" href="#url" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Fetch Endpoint that is published in the Federation Metadata 
in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h3 id="statement_lifetime"><code>statement_lifetime</code><a class="headerlink" href="#statement_lifetime" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type"><a href="../#time-duration-configuration-options">duration</a></span>
<span class="badge badge-blue" title="Default Value">600000 seconds</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>statement_lifetime</code> option sets the lifetime of the issued Entity Statements.
The default is a bit less than one week.</p>
<h2 id="list"><code>list</code><a class="headerlink" href="#list" title="Permanent link">&para;</a></h2>
<p>Under the <code>list</code> option the Federation Subordinate Listing Endpoint is configured.</p>
<p>This endpoint is required if LightHouse serves as a Trust Anchor and / or Intermediate Authority.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">list</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/list</span>
</code></pre></div>
</details>
<h3 id="path_1"><code>path</code><a class="headerlink" href="#path_1" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Listing Endpoint is available. Unless <code>url</code> is not set
the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Listing Endpoint. To include an external Listing Endpoint in the
Federation Metadata in the Entity Configuration set <code>url</code>. However, for the Listing Endpoint it is unlikely that this
deployment scenario makes sense.</p>
<h3 id="url_1"><code>url</code><a class="headerlink" href="#url_1" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Listing Endpoint that is published in the Federation Metadata
in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h2 id="resolve"><code>resolve</code><a class="headerlink" href="#resolve" title="Permanent link">&para;</a></h2>
<p>Under the <code>resolve</code> option the Resolve Endpoint is configured.</p>
<p>This endpoint is generally optional. However, if LightHouse should serve as a Resolver it is obviously required.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">resolve</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/resolve</span>
<span class="w">        </span><span class="nt">grace_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1h</span>
<span class="w">        </span><span class="nt">time_elapsed_grace_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.75</span>
</code></pre></div>
</details>
<h3 id="path_2"><code>path</code><a class="headerlink" href="#path_2" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Resolve Endpoint is available. Unless <code>url</code> is not set
the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Resolve Endpoint. To include an external Resolve Endpoint in the
Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_2"><code>url</code><a class="headerlink" href="#url_2" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Resolve Endpoint that is published in the Federation Metadata
in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h3 id="grace_period"><code>grace_period</code><a class="headerlink" href="#grace_period" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type"><a href="../#time-duration-configuration-options">duration</a></span>
<span class="badge badge-blue" title="Default Value">1 hour</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>grace_period</code> option sets a Grace Period for the Resolver Cache.
If a cached statement used by the resolver is not yet expired (on a request that needs it), but it will expire 
within this grace period, the cached statement still will be used, but might be refreshed in the background (see 
also the <code>time_elapsed_grace_factor</code> option). The grace period is given in seconds.</p>
<h3 id="time_elapsed_grace_factor"><code>time_elapsed_grace_factor</code><a class="headerlink" href="#time_elapsed_grace_factor" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">float</span>
<span class="badge badge-blue" title="Default Value">0.5</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>time_elapsed_grace_factor</code> option is used to further tweak the grace period behavior.
A cached statement that expires within the grace period will only be refreshed if a certain amount of its lifetime 
already has elapsed. How much time needs to already have elapsed is defined by this <code>time_elapsed_grace_factor</code>. </p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>If <code>grace_period</code> is set to <code>3600</code> statements that expire within one hour might be refreshed. If there would be 
no <code>time_elapsed_grace_factor</code> (or it would be set to <code>0.0</code>) a statement that is only valid for an hour, would 
always hit the grace period and would trigger a refresh even if it was only just fetched.</p>
<p>With a <code>time_elapsed_grace_factor=0.75</code> LightHouse would only trigger a refresh if also 75% of the lifetime 
(45mins in this case) have been passed.</p>
</div>
<h3 id="allowed_trust_anchors"><code>allowed_trust_anchors</code><a class="headerlink" href="#allowed_trust_anchors" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">list of strings</span>
<span class="badge badge-green" title="If this option is required or optional">optional; required if <code>proactive_resolver.enabled</code></span></p>
<p>Defines which Trust Anchors are permitted on the resolver.</p>
<p>When <code>proactive_resolver.enabled</code> is set, at least one <code>allowed_trust_anchors</code> entry must be configured (unless
<a href="#use_entity_collection_allowed_trust_anchors"><code>use_entity_collection_allowed_trust_anchors</code></a> is <code>true</code>). Each value
should be the Entity ID of a Trust Anchor.</p>
<h3 id="use_entity_collection_allowed_trust_anchors"><code>use_entity_collection_allowed_trust_anchors</code><a class="headerlink" href="#use_entity_collection_allowed_trust_anchors" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">boolean</span>
<span class="badge badge-blue" title="Default Value"><code>false</code></span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>If set to <code>true</code>, the resolver reuses the Trust Anchors configured under <a href="#entity_collection"><code>entity_collection.allowed_trust_anchors</code></a>.
This is useful when the same set of Trust Anchors is used for both periodic entity collection and proactive resolver refreshes.</p>
<p>If <code>true</code>, you do not need to configure <code>resolve.allowed_trust_anchors</code> separately.</p>
<h3 id="proactive_resolver"><code>proactive_resolver</code><a class="headerlink" href="#proactive_resolver" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">object / mapping</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>Enables and configures a background resolver that proactively refreshes cached statements used for resolution.</p>
<p>If enabled, the following requirements apply:</p>
<ul>
<li><a href="#entity_collection"><code>entity_collection</code></a> must be enabled and <code>interval</code> must be set.</li>
<li>Either <a href="#use_entity_collection_allowed_trust_anchors"><code>use_entity_collection_allowed_trust_anchors</code></a> is <code>true</code>, or
  <a href="#allowed_trust_anchors"><code>allowed_trust_anchors</code></a> must list at least one Trust Anchor.</li>
<li><a href="#dir"><code>response_storage.dir</code></a> must be set, and at least one of <a href="#store_json"><code>store_json</code></a> or <a href="#store_jwt"><code>store_jwt</code></a> must be <code>true</code>.</li>
</ul>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">  </span><span class="nt">entity_collection</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/entity-collection</span>
<span class="w">    </span><span class="nt">allowed_trust_anchors</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://ta.example.com</span>
<span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8h</span>
<span class="w">  </span><span class="nt">resolve</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/resolve</span>
<span class="w">    </span><span class="nt">grace_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1h</span>
<span class="w">    </span><span class="nt">use_entity_collection_allowed_trust_anchors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">proactive_resolver</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">concurrency_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="w">      </span><span class="nt">queue_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10000</span>
<span class="w">      </span><span class="nt">response_storage</span><span class="p">:</span>
<span class="w">        </span><span class="nt">dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/lib/lighthouse/resolver</span>
<span class="w">        </span><span class="nt">store_jwt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
</details>
<h4 id="enabled"><code>enabled</code><a class="headerlink" href="#enabled" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">boolean</span>
<span class="badge badge-blue" title="Default Value"><code>false</code></span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>Turns on the proactive resolver.</p>
<h4 id="concurrency_limit"><code>concurrency_limit</code><a class="headerlink" href="#concurrency_limit" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">integer</span>
<span class="badge badge-blue" title="Default Value">64</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>Limits how many proactive refresh tasks may run in parallel.</p>
<h4 id="queue_size"><code>queue_size</code><a class="headerlink" href="#queue_size" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">integer</span>
<span class="badge badge-blue" title="Default Value">10000</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>Maximum size of the internal queue holding pending refresh jobs.</p>
<h4 id="response_storage"><code>response_storage</code><a class="headerlink" href="#response_storage" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">object / mapping</span>
<span class="badge badge-green" title="If this option is required or optional">required, if <code>proactive_resolver.enabled</code></span></p>
<p>Configures how responses from the proactive resolver are persisted.</p>
<h5 id="dir"><code>dir</code><a class="headerlink" href="#dir" title="Permanent link">&para;</a></h5>
<p><span class="badge badge-purple" title="Value Type">directory path</span>
<span class="badge badge-green" title="If this option is required or optional">required, if <code>proactive_resolver.enabled</code></span></p>
<p>Directory where the resolver stores responses. Must be set when the proactive resolver is enabled.</p>
<h5 id="store_json"><code>store_json</code><a class="headerlink" href="#store_json" title="Permanent link">&para;</a></h5>
<p><span class="badge badge-purple" title="Value Type">boolean</span>
<span class="badge badge-blue" title="Default Value"><code>false</code></span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>Whether to store responses as parsed JSON.</p>
<h5 id="store_jwt"><code>store_jwt</code><a class="headerlink" href="#store_jwt" title="Permanent link">&para;</a></h5>
<p><span class="badge badge-purple" title="Value Type">boolean</span>
<span class="badge badge-blue" title="Default Value"><code>true</code></span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>Whether to store responses as pre-signed JWTs.</p>
<h2 id="trust_mark"><code>trust_mark</code><a class="headerlink" href="#trust_mark" title="Permanent link">&para;</a></h2>
<p>Under the <code>trust_mark</code> option the Federation Trust Mark Endpoint is configured.</p>
<p>This endpoint is required if LightHouse serves as a Trust Mark Issuer.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trust_mark</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/trustmark</span>
<span class="w">        </span><span class="nt">trust_mark_specs</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">trust_mark_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://tm.example.org</span>
<span class="w">              </span><span class="nt">lifetime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1d</span>
<span class="w">              </span><span class="nt">ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://tm.example.org/ref</span>
<span class="w">              </span><span class="nt">logo_uri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://tm.example.org/logo</span>
<span class="w">              </span><span class="nt">extra_claim</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foobar</span>
<span class="w">              </span><span class="nt">delegation_jwt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ey...</span>
<span class="w">              </span><span class="nt">checker</span><span class="p">:</span>
<span class="w">                  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trust_path</span>
<span class="w">                  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">                      </span><span class="nt">trust_anchors</span><span class="p">:</span>
<span class="w">                          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">entity_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://ta.example.com</span>
</code></pre></div>
</details>
<h3 id="path_3"><code>path</code><a class="headerlink" href="#path_3" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Trust Mark Endpoint is available. Unless <code>url</code> is not set
the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Trust Mark Endpoint. To include an external Trust Mark Endpoint in the
Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_3"><code>url</code><a class="headerlink" href="#url_3" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Trust Mark Endpoint that is published in the Federation Metadata
in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h3 id="trust_mark_specs"><code>trust_mark_specs</code><a class="headerlink" href="#trust_mark_specs" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">list</span>
<span class="badge badge-red" title="If this option is required or optional">required, if trust marks should be issued</span></p>
<p>The <code>trust_mark_specs</code> option is used to configure which Trust Marks can be issued.
Each list element has the following configuration options defined:</p>
<h4 id="trust_mark_type"><code>trust_mark_type</code><a class="headerlink" href="#trust_mark_type" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required</span></p>
<p>The <code>trust_mark_type</code> option sets the Trust Mark Type (ID) of the Trust Mark.</p>
<h4 id="lifetime"><code>lifetime</code><a class="headerlink" href="#lifetime" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type"><a href="../#time-duration-configuration-options">duration</a></span>
<span class="badge badge-orange" title="If this option is required or optional">required, if the Trust Mark should expire</span></p>
<p>The <code>lifetime</code> option is used to set the lifetime of each Trust Mark JWT.</p>
<h4 id="ref"><code>ref</code><a class="headerlink" href="#ref" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>ref</code> option is used to set the ref uri inside the Trust Mark JWT, as defined in the OpenID Federation 
Specification.</p>
<h4 id="logo_uri"><code>logo_uri</code><a class="headerlink" href="#logo_uri" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>logo_uri</code> option is used to set the logo uri inside the Trust Mark JWT, as defined in the OpenID Federation
Specification.</p>
<h4 id="delegation_jwt"><code>delegation_jwt</code><a class="headerlink" href="#delegation_jwt" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-orange" title="If this option is required or optional">required, if delegation is used</span></p>
<p>The <code>delegation_jwt</code> option is used to set the delegation JWT inside the Trust Mark JWT, as defined in the OpenID 
Federation Specification. The delegation JWT is required if this LightHouse instance is not the Trust Mark Owner, 
but issues Trust Marks on behalf of the owner.</p>
<h4 id="extra-claims">Extra Claims<a class="headerlink" href="#extra-claims" title="Permanent link">&para;</a></h4>
<p>Additional claims can be provided. Any provided claim that is not defined here will also be added to the Trust Mark JWT.</p>
<h4 id="checker"><code>checker</code><a class="headerlink" href="#checker" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">object / mapping</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>checker</code> option is used to configure <a href="../../features/entity_checks/">Entity Checks</a> that can be used to 
dynamically issue Trust Marks to Entities. Check the <a href="../../features/entity_checks/">Entity Checks</a> documentation on 
the configuration format. Also see <a href="../../features/trustmarks/">Trust Marks</a> for some more details on how Trust Mark 
issuance works with LightHouse.</p>
<h2 id="trust_mark_request"><code>trust_mark_request</code><a class="headerlink" href="#trust_mark_request" title="Permanent link">&para;</a></h2>
<p>Under the <code>trust_mark_request</code> option a custom / proprietary endpoint can be configured. This endpoint allows an 
Entity to request to be entitled for a certain Trust Mark. Our implementation of the
<a href="#trust_mark">Trust Mark Endpoint</a> allows <a href="../../features/entity_checks/">automatic checks</a>; this endpoint can be used for manual checks, 
with the following general flow:</p>
<pre class="mermaid"><code>flowchart TD
    A[Entity requests Trust Mark via the Trust Mark Request endpoint]
    B[Admin reviews the request]
    C[No Trust Mark granted]
    D[Entity is entitled to obtain Trust Mark]
    E[Entity obtains Trust Mark from the Trust Mark endpoint]

    A --&gt; B
    B --&gt;|Decline| C
    B --&gt;|Approve| D
    D --&gt; E</code></pre>
<p>A request to the Trust Mark Request endpoint is defined just as a request to the Trust Mark Endpoint.</p>
<p>This endpoint is optional and only applicable if LightHouse serves as a Trust Mark Issuer.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trust_mark_request</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/trustmark/request</span>
</code></pre></div>
</details>
<h3 id="path_4"><code>path</code><a class="headerlink" href="#path_4" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Trust Mark Request Endpoint is available. Unless <code>url</code> is 
not set the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Trust Mark Request Endpoint. To include an external Trust Mark 
Request Endpoint in the Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_4"><code>url</code><a class="headerlink" href="#url_4" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Trust Mark Request Endpoint that is published in the Federation 
Metadata in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h2 id="trust_mark_status"><code>trust_mark_status</code><a class="headerlink" href="#trust_mark_status" title="Permanent link">&para;</a></h2>
<p>Under the <code>trust_mark_status</code> option the Federation Trust Mark Status Endpoint is configured.</p>
<p>This endpoint is optional and only applicable if LightHouse serves as a Trust Mark Issuer.</p>
<div class="admonition warning">
<p class="admonition-title"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M208 40a56 56 0 1 1 112 0 56 56 0 1 1-112 0M10.5 181.3c5.9-11.9 20.3-16.7 32.2-10.7l24.6 12.3 12.2-20.4C98.4 131 132.7 112 169.1 112c46.2 0 87.7 30.5 100.5 75.4l32.2 112.7 92.9 46.4 25.8-43c5.8-9.6 16.2-15.5 27.4-15.5s21.7 5.9 27.4 15.5l96 160c5.9 9.9 6.1 22.2.4 32.2S555.5 512 544 512H352c-11.5 0-22.2-6.2-27.8-16.2s-5.5-22.3.4-32.2l45.4-75.8L21.3 213.5c-11.9-5.9-16.7-20.3-10.7-32.2zm83.8 126.1 112 56c10.8 5.4 17.7 16.5 17.7 28.6v88c0 17.7-14.3 32-32 32s-32-14.3-32-32v-68.2l-61.3-30.7-36.3 109c-5.6 16.8-23.7 25.8-40.5 20.2s-25.8-23.7-20.2-40.4l48-144c2.9-8.8 9.5-15.9 18.1-19.4s18.3-3.2 26.6.9z"/></svg></span> NYI</p>
<p>The current implementation of the Trust Mark Status Endpoint is not yet updated to draft 43 - and therefore 
works complelty differently.</p>
</div>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trust_mark_status</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/trustmark/status</span>
</code></pre></div>
</details>
<h3 id="path_5"><code>path</code><a class="headerlink" href="#path_5" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Trust Mark Status Endpoint is available. Unless <code>url</code> is
not set the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Trust Mark Status Endpoint. To include an external Trust Mark
Status Endpoint in the Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_5"><code>url</code><a class="headerlink" href="#url_5" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Trust Mark Status Endpoint that is published in the Federation
Metadata in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h2 id="trust_mark_list"><code>trust_mark_list</code><a class="headerlink" href="#trust_mark_list" title="Permanent link">&para;</a></h2>
<p>Under the <code>trust_mark_list</code> option the Federation Trust Marked Entities Listing Endpoint is configured.</p>
<p>This endpoint is optional and only applicable if LightHouse serves as a Trust Mark Issuer.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trust_mark_list</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/trustmark/list</span>
</code></pre></div>
</details>
<h3 id="path_6"><code>path</code><a class="headerlink" href="#path_6" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Trust Marked Entities Listing Endpoint is available. 
Unless <code>url</code> is not set the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Trust Marked Entities Listing Endpoint. To include an external 
Trust Marked Entities Listing Endpoint in the Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_6"><code>url</code><a class="headerlink" href="#url_6" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Trust Marked Entities Listing Endpoint that is published in the 
Federation Metadata in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h2 id="historical_keys"><code>historical_keys</code><a class="headerlink" href="#historical_keys" title="Permanent link">&para;</a></h2>
<p>Under the <code>historical_keys</code> option the Federation Historical Keys Endpoint is configured.</p>
<p>This endpoint is optional.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">historical_keys</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/federation_historical_keys</span>
</code></pre></div>
</details>
<h3 id="path_7"><code>path</code><a class="headerlink" href="#path_7" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Historical Keys Endpoint is available. Unless <code>url</code> is 
not set the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Historical Keys Endpoint. To include an external Historical Keys 
Endpoint in the Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_7"><code>url</code><a class="headerlink" href="#url_7" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Historical Keys Endpoint that is published in the Federation 
Metadata in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h2 id="enroll"><code>enroll</code><a class="headerlink" href="#enroll" title="Permanent link">&para;</a></h2>
<p>Under the <code>enroll</code> option a custom / proprietary endpoint can be configured. This endpoint allows an
Entity to automatically be enrolled to the federation. This works by configured
<a href="../../features/entity_checks/">Entity Checks</a> that an Entity must pass before it will be enrolled to the federation.
See <a href="../../features/endpoints/#enrolling-entities">Enrolling Entities</a> for more information about how to enroll 
Entities and on how the request is defined.</p>
<p>This endpoint is optional and only applicable if LightHouse serves as a Trust Anchor / Intermediate Authority.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enroll</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/enroll</span>
<span class="w">        </span><span class="nt">checker</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trust_path</span>
<span class="w">            </span><span class="nt">config</span><span class="p">:</span>
<span class="w">                </span><span class="nt">trust_anchors</span><span class="p">:</span>
<span class="w">                    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">entity_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://ta.example.com</span>
</code></pre></div>
</details>
<h3 id="path_8"><code>path</code><a class="headerlink" href="#path_8" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Enroll Endpoint is available. Unless <code>url</code> is not set
the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide an Enroll Endpoint. To include an external Enroll Endpoint in the
Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_8"><code>url</code><a class="headerlink" href="#url_8" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Enroll Endpoint that is published in the Federation Metadata
in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h4 id="checker_1"><code>checker</code><a class="headerlink" href="#checker_1" title="Permanent link">&para;</a></h4>
<p><span class="badge badge-purple" title="Value Type">object / mapping</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>checker</code> option is used to configure <a href="../../features/entity_checks/">Entity Checks</a> that can be used to decide 
whether an Entity will be enrolled or not. Check the <a href="../../features/entity_checks/">Entity Checks</a> documentation on
the configuration format.</p>
<h2 id="enroll_request"><code>enroll_request</code><a class="headerlink" href="#enroll_request" title="Permanent link">&para;</a></h2>
<p>Under the <code>enroll_request</code> option a custom / proprietary endpoint can be configured. This endpoint allows an
Entity to request to be enrolled to the federation. Our (also proprietary) 
<a href="#enroll">Enrollment Endpoint</a> allows <a href="../../features/entity_checks/">automatic checks</a>; this endpoint can be used 
for manual checks, with the following general flow:</p>
<pre class="mermaid"><code>flowchart TD
    A[Entity requests Enrollment via the Enroll Request endpoint]
    B[Admin reviews the request]
    C[Entity not enrolled]
    D[Entity is enrolled]
    E[Entity is included in Listing Endpoint response]
    F[Entity is fetchable from the Fetch Endpoint]

    A --&gt; B
    B --&gt;|Decline| C
    B --&gt;|Approve| D
    D --&gt; E
    D --&gt; F</code></pre>
<p>A request to the Enroll Request endpoint is defined just as a request to the Enroll Endpoint.</p>
<p>This endpoint is optional and only applicable if LightHouse serves as a Trust Anchor / Intermediate Authority.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trust_mark_request</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/trustmark/request</span>
</code></pre></div>
</details>
<h3 id="path_9"><code>path</code><a class="headerlink" href="#path_9" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Enroll Request Endpoint is available. Unless <code>url</code> is
not set the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide a Enroll Request Endpoint. To include an external Enroll
Request Endpoint in the Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_9"><code>url</code><a class="headerlink" href="#url_9" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Enroll Request Endpoint that is published in the Federation
Metadata in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h2 id="entity_collection"><code>entity_collection</code><a class="headerlink" href="#entity_collection" title="Permanent link">&para;</a></h2>
<p>Under the <code>entity_collection</code> option the Federation Entity Collection Endpoint is configured. This endpoint follows a 
work-in-progress extension draft, currently available at: https://zachmann.github.io/openid-federation-entity-collection/main.html</p>
<p>This endpoint is optional.</p>
<details class="file">
<summary>config.yaml</summary>
<div class="highlight"><pre><span></span><code><span class="nt">endpoints</span><span class="p">:</span>
<span class="w">    </span><span class="nt">entity_collection</span><span class="p">:</span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/entity-collection</span>
<span class="w">        </span><span class="nt">allowed_trust_anchors</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://ta.example.com</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://ta2.example.com</span>
<span class="w">        </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8h</span>
<span class="w">        </span><span class="nt">concurrency_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">        </span><span class="nt">pagination_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">512</span>
</code></pre></div>
</details>
<h3 id="path_10"><code>path</code><a class="headerlink" href="#path_10" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">string</span>
<span class="badge badge-red" title="If this option is required or optional">required, unless <code>url</code> is given</span></p>
<p>The <code>path</code> option is used to set the url path under which the Entity Collection Endpoint is available. Unless <code>url</code> is 
not set the full external url will be <code>&lt;entity_id&gt;&lt;path&gt;</code>.</p>
<p>If <code>path</code> is not set, LightHouse will not provide an Entity Collection Endpoint. To include an external Entity 
Collection Endpoint in the Federation Metadata in the Entity Configuration set <code>url</code>.</p>
<h3 id="url_10"><code>url</code><a class="headerlink" href="#url_10" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">uri</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>url</code> option is used to set the external url of the Entity Collection Endpoint that is published in the Federation 
Metadata in the Entity Configuration. This option is usually not set. There are two cases where it might be set:</p>
<ul>
<li>To overwrite the default constructing of the external url from the provided <code>path</code>. This should usually not be needed.</li>
<li>To use an external Endpoint.</li>
</ul>
<h3 id="allowed_trust_anchors_1"><code>allowed_trust_anchors</code><a class="headerlink" href="#allowed_trust_anchors_1" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">list of strings</span>
<span class="badge badge-orange" title="If this option is required or optional">required, if <code>interval</code> is set; otherwise optional</span></p>
<p>The <code>allowed_trust_anchors</code> option restricts which Trust Anchors can be used in requests against the Entity Collection 
Endpoint. If provided, a request's <code>trust_anchor</code> parameter must match one of the configured entries; otherwise the 
endpoint responds with an error.</p>
<p>If <code>interval</code> is configured (see below), at least one <code>allowed_trust_anchors</code> entry must be provided to define which 
Trust Anchors are periodically collected.</p>
<h3 id="interval"><code>interval</code><a class="headerlink" href="#interval" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type"><a href="../#time-duration-configuration-options">duration</a></span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>interval</code> option enables periodic collection of entities from the configured Trust Anchors. When set, LightHouse 
starts a background collector that collects entities for each Trust Anchor every <code>interval</code>.</p>
<p>If <code>interval</code> is not set (default), the endpoint serves collection requests on demand without running a background collector.</p>
<h3 id="concurrency_limit_1"><code>concurrency_limit</code><a class="headerlink" href="#concurrency_limit_1" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">integer</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>The <code>concurrency_limit</code> option controls how many periodic collection tasks can run in parallel when <code>interval</code> is set. 
If <code>interval</code> is not set, providing <code>concurrency_limit</code> has no effect and will be ignored (a warning is logged).</p>
<h3 id="pagination_limit"><code>pagination_limit</code><a class="headerlink" href="#pagination_limit" title="Permanent link">&para;</a></h3>
<p><span class="badge badge-purple" title="Value Type">integer</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span></p>
<p>Enables pagination support for the Entity Collection Endpoint. When set to a positive integer, clients can use the
<code>limit</code> and <code>from_entity_id</code> request parameters to page through results ordered by <code>entity_id</code>.</p>
<p>The server enforces a maximum page size equal to the configured <code>pagination_limit</code>. When pagination is disabled
(<code>pagination_limit</code> not set or <code>&lt;= 0</code>), requests including <code>limit</code> or <code>from_entity_id</code> are rejected with
<code>unsupported_parameter</code> errors.</p>
<p>Pagination can be enabled independently of <code>interval</code>; it applies to both on-demand collection and periodic collection.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../signing/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Signing">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Signing
              </div>
            </div>
          </a>
        
        
          
          <a href="../federation_data/" class="md-footer__link md-footer__link--next" aria-label="Next: Federation Data">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Federation Data
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 - 2025 Gabriel Zachmann
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/go-oidfed/lighthouse" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/r/oidfed/lighthouse" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:oidfed@lists.kit.edu" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.top", "navigation.footer", "toc.integrate", "content.code.copy", "content.code.annotate", "content.tooltips"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../assets/_markdown_exec_pyodide.js"></script>
      
        <script src="../../assets/external/unpkg.com/mermaid@11/dist/mermaid.min.js"></script>
      
    
  </body>
</html>