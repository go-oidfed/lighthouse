---
icon: material/signature-freehand
---
<span class="badge badge-red" title="If this option is required or optional">required</span>


Under the `signing` config option the signatures are configured.

In Lighthouse >= 0.20.0 some options are stored in the database.

## `alg`
<span class="badge badge-purple" title="Value Type">enum</span>
<span class="badge badge-blue" title="Default Value">ES512</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span>

The signing algorithm that is used.

Supported values are:

- `ES256`
- `ES384`
- `ES512`
- `EdDSA` (ed25519)
- `RS256`
- `RS384`
- `RS512`
- `PS256`
- `PS384`
- `PS512`

!!! warning 
    
    This option is a database managed option. It can be changed via the 
    admin API. If this config option is not set in the database, this config 
    file parameter will be used to set it. If this option already exists in 
    the database, this config file option will be ignored. To overwrite the 
    database value with the config file value, you need to set the
    `alg#overwrite` option to `true`.

??? file "config.yaml"

    ```yaml
    signing:
        alg: EdDSA
        alg#overwrite: true
    ```


## `rsa_key_len`
<span class="badge badge-purple" title="Value Type">integer</span>
<span class="badge badge-blue" title="Default Value">2048</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span>

The `rsa_key_len` option defines the length of the generated key, if an 
RSA-based signing key is used and the key is generated by LightHouse because 
it was not provided externally.


!!! warning

    This option is a database managed option. It can be changed via the 
    admin API. If this config option is not set in the database, this config 
    file parameter will be used to set it. If this option already exists in 
    the database, this config file option will be ignored. To overwrite the 
    database value with the config file value, you need to set the
    `rsa_key_len#overwrite` option to `true`.

??? file "config.yaml"

    ```yaml
    signing:
        alg: PS256
        rsa_key_len: 4096
        rsa_key_len#overwrite: true
    ```

## `key_file`
<span class="badge badge-red">Deprecated</span>

The `key_file` option is deprecated and must no longer be used.
Instead [`key_dir`](#key_dir) is used.
To keep the existing signing key place it in the `key_dir` directory (if not 
already the case) and rename it to the following naming scheme:
`federation_<alg>.pem`, e.g. `federation_ES512.pem`

## `key_dir`
<span class="badge badge-purple" title="Value Type">directory path</span>
<span class="badge badge-red" title="If this option is required or optional">required</span>

The `key_dir` option specifies the path to a directory that contains the
private signing key(s), as well as a key set for public keys.

??? file "config.yaml"

    ```yaml
    signing:
        key_dir: /path/to/keys
    ```

## `auto_generate_keys`
<span class="badge badge-purple" title="Value Type">boolean</span>
<span class="badge badge-blue" title="Default Value">true</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span>

When set to false, Lighthouse will not automatically generate a signing key at startup.
If the required private key is not present in `key_dir`, Lighthouse will exit with an error instead of generating a new key.
The expected filename is `federation_<alg>.pem`, for example `federation_ES512.pem`.

??? file "config.yaml"

    ```yaml
    signing:
        key_dir: /path/to/keys
        alg: ES512
        auto_generate_keys: false
    ```

## `key_rotation`
<span class="badge badge-purple" title="Value Type">object / mapping</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span>

Under the `key_rotation` option key rollover / key rotation is configured.

!!! warning

    This option is a database managed option. It can be changed via the 
    admin API. If this config option is not set in the database, this config 
    file parameter will be used to set it. If any `key_rotation` option already 
    exists in the database, this config file option will be ignored. To 
    overwrite the database value with the config file value, you need to set the
    `key_rotation#overwrite` option to `true`. In that case all values of the 
    `key_rotation` object will be overwritten.

??? file "config.yaml"

    ```yaml
    signing:
        key_rotation#overwrite: true
        key_rotation:
            enabled: true
            interval: 30d
    ```

### `enabled`
<span class="badge badge-purple" title="Value Type">boolean</span>
<span class="badge badge-blue" title="Default Value">`false`</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span>

To enable automatic key rollover / rotation set `enabled` to true.
If enabled, Lighthouse will automatically generate a new signing key when 
needed (according to the configured interval). The current and next public 
key are published in the entity configuration; this allows other entities to 
already have the public key of the next signing key when it will be used.

!!! warning

    This option is a database managed option. It can be changed via the 
    admin API. If this config option is not set in the database, this config 
    file parameter will be used to set it. If any `key_rotation` option already 
    exists in the database, this config file option will be ignored. To 
    overwrite the database value with the config file value, you need to set the
    `enabled#overwrite` option to `true`.

### `interval`
<span class="badge badge-purple" title="Value Type">[duration](index.md#time-duration-configuration-options)</span>
<span class="badge badge-blue" title="Default Value">600000 seconds = ca. 1 week</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span>

The `interval` option is used to set the interval at which keys should be 
rotated, i.e. this defines the lifetime of a key.
This cannot be smaller than the lifetime of the Entity Configuration. It 
also should not be smaller than the lifetime of entity statements, trust 
marks, or other JWTs signed with the federation entity key.

!!! warning

    This option is a database managed option. It can be changed via the 
    admin API. If this config option is not set in the database, this config 
    file parameter will be used to set it. If any `key_rotation` option already 
    exists in the database, this config file option will be ignored. To 
    overwrite the database value with the config file value, you need to set the
    `interval#overwrite` option to `true`.

### `overlap`
<span class="badge badge-purple" title="Value Type">[duration](index.md#time-duration-configuration-options)</span>
<span class="badge badge-blue" title="Default Value">1 hour</span>
<span class="badge badge-green" title="If this option is required or optional">optional</span>

The `overlap` option is used to set an overlap period between the current and 
next key's lifetime. This overlap period gives LightHouse a small time 
window in which it can do the actual signing key switch (the next key's 
public key will be published in advance). This can be a fairly small value. 

!!! warning

    This option is a database managed option. It can be changed via the 
    admin API. If this config option is not set in the database, this config 
    file parameter will be used to set it. If any `key_rotation` option already 
    exists in the database, this config file option will be ignored. To 
    overwrite the database value with the config file value, you need to set the
    `overlap#overwrite` option to `true`.
